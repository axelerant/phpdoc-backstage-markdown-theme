{%- macro markdown_route(curr_template, value) -%}
    {%- set urls = value|route('url') -%}
    {%- set urls = urls is iterable ? urls : [urls] -%}
    {%- set links = [] -%}

    {%- for url in urls -%}
        {%- if url == 'mixed' -%}
            {%- set links = links|merge(['mixed']) -%}
        {%- else -%}

            {%- set url = url|replace({'.html': '.md', '#function_': '#', '#method_': '#'}) -%}
            {# Make the anchor part lowercase #}
            {%- set url = '#' in url ? url|split('#')[0] ~ '#' ~ url|split('#')[1]|lower : url -%}

            {# Apply conditional replacement #}
            {%- if curr_template == 'index' -%}
                {%- set url = './' ~ url -%}
            {%- else -%}
                {%- set url = '../' ~ url -%}
            {%- endif -%}

            {%- set links = links|merge(['[' ~ value.name ~ '](' ~ url ~ ')']) -%}
        {%- endif -%}
    {%- endfor -%}

    {{ links|join(' ') }}
{%- endmacro -%}


{%- macro markdown_link(curr_template, value) -%}
    {%- set urls = link(value) -%}
    {%- set urls = urls is iterable ? urls : [urls] -%}
    {%- set links = [] -%}

    {%- for url in urls -%}
        {%- if url == 'mixed' -%}
            {%- set links = links|merge(['mixed']) -%}
        {%- else -%}
            {%- set url = url|replace({'.html': '.md', '#function_': '#', '#method_': '#'}) -%}
            {# Make the anchor part lowercase #}
            {%- set url = '#' in url ? url|split('#')[0] ~ '#' ~ url|split('#')[1]|lower : url -%}

            {# Apply conditional replacement #}
            {%- if curr_template == 'index' -%}
                {%- set url = './' ~ url -%}
            {%- else -%}
                {%- set url = '../' ~ url -%}
            {%- endif -%}

            {%- set links = links|merge([url]) -%}
        {%- endif -%}
    {%- endfor -%}

    {{ links|join(' ') }}
{%- endmacro -%}

